*** Settings ***
Resource	../rfdoc.tsv


*** Variables ***
${UPLOADED LIBRARY}	This variable is set in  'Upload library' keyword and used in "and the notification contains a link to library details" keyword


*** Keywords ***

and upload page is open
	Navigate to upload page
	
When user uploads new library XML
	Upload File	BuiltIn.xml	BuiltIn

Then a notification that a library was successfully uploaded is shown
	Upload page should contain success information	BuiltIn

and the notification contains a link to library details
	Navigate to uploaded library
	
and the library is stored into the database
	Library should contain keywords	@{BUILTIN KEYWORDS}
	
When user tries to upload already existing library
	Checkbox should not be selected	override
	and uploads existing library documentation
	
Then an error that library already exists is shown
	${source} =	Get source
	Log	${source}	DEBUG
	Error should be shown	ExampleLibrary already exists

and library data is not updated in the database
	Navigate to library	ExampleLibrary
	Library should contain keywords	@{INITIAL KEYWORDS}
	
When user selects "override existing library" option
	Select checkbox	override

and uploads existing library documentation
	Upload file	LibraryWithInit_v2.xml	ExampleLibrary

Then a notification that a library was successfully updated is shown 
	Upload page should contain success information	ExampleLibrary

and the library is updated in the database
	Library Should Contain Keywords	@{UPDATED KEYWORDS}

