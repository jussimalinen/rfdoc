*** Settings ***
Resource         ../rfdoc.txt

*** Variables ***
${UPLOADED LIBRARY}   This variable is set in 'Upload library' keyword and used in "and the notification contains a link to library details" keyword

*** Keywords ***
And Upload Page Is Open
    Navigate to upload page

When User Uploads New Library XML
    Upload File   BuiltIn.xml   BuiltIn

Then A Notification That A Library Was Successfully Uploaded Is Shown
    Upload page should contain success information   BuiltIn

And The Notification Contains A Link To Library Details
    Navigate to uploaded library

And The Library Is Stored Into The Database
    Library should contain keywords   @{BUILTIN KEYWORDS}

When User Tries To Upload Already Existing Library
    Checkbox should not be selected   override
    and uploads existing library documentation

Then An Error That Library Already Exists Is Shown
    ${source} =   Get source
    Log   ${source}   DEBUG
    Error should be shown   ExampleLibrary already exists

And Library Data Is Not Updated In The Database
    Navigate to library   ExampleLibrary
    Library should contain keywords   @{INITIAL KEYWORDS}

When User Selects "override Existing Library" Option
    Select checkbox   override

And Uploads Existing Library Documentation
    Upload file   LibraryWithInit_v2.xml   ExampleLibrary

Then A Notification That A Library Was Successfully Updated Is Shown
    Upload page should contain success information   ExampleLibrary

And The Library Is Updated In The Database
    Library Should Contain Keywords   @{UPDATED KEYWORDS}

